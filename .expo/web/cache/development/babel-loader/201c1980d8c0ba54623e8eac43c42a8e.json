{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"C:\\\\Users\\\\emily.lombarde\\\\Documents\\\\SocialGlobo\\\\src\\\\pages\\\\signIn\\\\index.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function () { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport StatusBar from \"react-native-web/dist/exports/StatusBar\";\nimport AsyncStorage from \"react-native-web/dist/exports/AsyncStorage\";\nimport { StackActions, NavigationActions } from 'react-navigation';\nimport api from \"../../src/services/api\";\nimport { Container, Logo, Input, ErrorMessage, Button, ButtonText, SignUpLink, SignUpLinkText } from \"./styles\";\n\nvar SignIn = function (_Component) {\n  _inherits(SignIn, _Component);\n\n  var _super = _createSuper(SignIn);\n\n  function SignIn() {\n    var _this;\n\n    _classCallCheck(this, SignIn);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.state = {\n      email: '',\n      password: '',\n      error: ''\n    };\n\n    _this.handleEmailChange = function (email) {\n      _this.setState({\n        email: email\n      });\n    };\n\n    _this.handlePasswordChange = function (password) {\n      _this.setState({\n        password: password\n      });\n    };\n\n    _this.handleCreateAccountPress = function () {\n      _this.props.navigation.navigate('SignUp');\n    };\n\n    _this.handleSignInPress = function _callee() {\n      var response, resetAction;\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!(_this.state.email.length === 0 || _this.state.password.length === 0)) {\n                _context.next = 4;\n                break;\n              }\n\n              _this.setState({\n                error: 'Preencha usuário e senha para continuar!'\n              }, function () {\n                return false;\n              });\n\n              _context.next = 17;\n              break;\n\n            case 4:\n              _context.prev = 4;\n              _context.next = 7;\n              return _regeneratorRuntime.awrap(api.post('/sessions', {\n                email: _this.state.email,\n                password: _this.state.password\n              }));\n\n            case 7:\n              response = _context.sent;\n              _context.next = 10;\n              return _regeneratorRuntime.awrap(AsyncStorage.setItem('@AirBnbApp:token', response.data.token));\n\n            case 10:\n              resetAction = StackActions.reset({\n                index: 0,\n                actions: [NavigationActions.navigate({\n                  routeName: 'Main'\n                })]\n              });\n\n              _this.props.navigation.dispatch(resetAction);\n\n              _context.next = 17;\n              break;\n\n            case 14:\n              _context.prev = 14;\n              _context.t0 = _context[\"catch\"](4);\n\n              _this.setState({\n                error: 'Houve um problema com o login, verifique suas credenciais!'\n              });\n\n            case 17:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, [[4, 14]], Promise);\n    };\n\n    return _this;\n  }\n\n  _createClass(SignIn, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(Container, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 9\n        }\n      }, React.createElement(StatusBar, {\n        hidden: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 13\n        }\n      }), React.createElement(Input, {\n        placeholder: \"Endere\\xE7o de e-mail\",\n        value: this.state.email,\n        onChangeText: this.handleEmailChange,\n        autoCapitalize: \"none\",\n        autoCorrect: false,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 13\n        }\n      }), React.createElement(Input, {\n        placeholder: \"Senha\",\n        value: this.state.password,\n        onChangeText: this.handlePasswordChange,\n        autoCapitalize: \"none\",\n        autoCorrect: false,\n        secureTextEntry: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 13\n        }\n      }), this.state.error.length !== 0 && React.createElement(ErrorMessage, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 47\n        }\n      }, this.state.error), React.createElement(Button, {\n        onPress: this.handleSignInPress,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 13\n        }\n      }, React.createElement(ButtonText, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 13\n        }\n      }, \"Entrar\")), React.createElement(SignUpLink, {\n        onPress: this.handleCreateAccountPress,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 13\n        }\n      }, React.createElement(SignUpLinkText, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 13\n        }\n      }, \"Criar conta gr\\xE1tis\")));\n    }\n  }]);\n\n  return SignIn;\n}(Component);\n\nSignIn.navigationOptions = {\n  header: null\n};\nSignIn.propTypes = {\n  navigation: PropTypes.shape({\n    navigate: PropTypes.func,\n    dispatch: PropTypes.func\n  }).isRequired\n};\nexport { SignIn as default };","map":{"version":3,"sources":["C:/Users/emily.lombarde/Documents/SocialGlobo/src/pages/signIn/index.js"],"names":["React","Component","PropTypes","StackActions","NavigationActions","api","Container","Logo","Input","ErrorMessage","Button","ButtonText","SignUpLink","SignUpLinkText","SignIn","state","email","password","error","handleEmailChange","setState","handlePasswordChange","handleCreateAccountPress","props","navigation","navigate","handleSignInPress","length","post","response","AsyncStorage","setItem","data","token","resetAction","reset","index","actions","routeName","dispatch","navigationOptions","header","propTypes","shape","func","isRequired"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { StatusBar, AsyncStorage } from 'react-native';\r\nimport { StackActions, NavigationActions } from 'react-navigation';\r\n\r\nimport api from '../../src/services/api';\r\n\r\nimport {\r\n  Container,\r\n  Logo,\r\n  Input,\r\n  ErrorMessage,\r\n  Button,\r\n  ButtonText,\r\n  SignUpLink,\r\n  SignUpLinkText,\r\n} from './styles';\r\n\r\nexport default class SignIn extends Component {\r\n    static navigationOptions = {\r\n        header: null,\r\n    };\r\n\r\n    static propTypes = {\r\n        navigation: PropTypes.shape({\r\n            navigate: PropTypes.func,\r\n            dispatch: PropTypes.func,\r\n        }).isRequired,  \r\n    };\r\n\r\n    state = { email: '', password: '', error: '' };\r\n\r\n    handleEmailChange = (email) => {\r\n        this.setState({ email });\r\n    };\r\n    \r\n    handlePasswordChange = (password) => {\r\n        this.setState({ password });\r\n    };\r\n    \r\n    handleCreateAccountPress = () => {\r\n        this.props.navigation.navigate('SignUp');\r\n    };\r\n\r\n    handleSignInPress = async () => {\r\n        if (this.state.email.length === 0 || this.state.password.length === 0) {\r\n            this.setState({ error: 'Preencha usuário e senha para continuar!' }, () => false);\r\n        } else {\r\n            try {\r\n            const response = await api.post('/sessions', {\r\n                email: this.state.email,\r\n                password: this.state.password,\r\n            });\r\n                \r\n            await AsyncStorage.setItem('@AirBnbApp:token', response.data.token);\r\n\r\n            const resetAction = StackActions.reset({\r\n                index: 0,\r\n                actions: [\r\n                NavigationActions.navigate({ routeName: 'Main' }),\r\n                ],\r\n            });\r\n            this.props.navigation.dispatch(resetAction);\r\n            } catch (_err) {\r\n            this.setState({ error: 'Houve um problema com o login, verifique suas credenciais!' });\r\n            }\r\n        }\r\n    };\r\n\r\n    render() {\r\n        return (\r\n        <Container>\r\n            <StatusBar hidden />\r\n            {/* <Logo source={require('../../images/airbnb_logo.png')} resizeMode=\"contain\" /> */}\r\n            <Input\r\n            placeholder=\"Endereço de e-mail\"\r\n            value={this.state.email}\r\n            onChangeText={this.handleEmailChange}\r\n            autoCapitalize=\"none\"\r\n            autoCorrect={false}\r\n            />\r\n            <Input\r\n            placeholder=\"Senha\"\r\n            value={this.state.password}\r\n            onChangeText={this.handlePasswordChange}\r\n            autoCapitalize=\"none\"\r\n            autoCorrect={false}\r\n            secureTextEntry\r\n            />\r\n            {this.state.error.length !== 0 && <ErrorMessage>{this.state.error}</ErrorMessage>}\r\n            <Button onPress={this.handleSignInPress}>\r\n            <ButtonText>Entrar</ButtonText>\r\n            </Button>\r\n            <SignUpLink onPress={this.handleCreateAccountPress}>\r\n            <SignUpLinkText>Criar conta grátis</SignUpLinkText>\r\n            </SignUpLink>\r\n        </Container>\r\n        );\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}